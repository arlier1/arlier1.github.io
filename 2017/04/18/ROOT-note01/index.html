<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ROOT-note01 · Hexo</title><meta name="description" content="ROOT-note01 - arlier"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="https:/arlier1.github.io/favicon.png"><link rel="stylesheet" href="https:/arlier1.github.io/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="https:/arlier1.github.io/" class="logo-link"><img src="https:/arlier1.github.io/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="https:/arlier1.github.io/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="https:/arlier1.github.io/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://arlier.work" target="_blank" class="nav-list-link">WORK</a></li><li class="nav-list-item"><a href="https://github.com/arlier" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://hithep.science" target="_blank" class="nav-list-link">HITHEP</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ROOT-note01</h1><div class="post-info">Apr 18, 2017</div><div class="post-content"><h1 id="ROOT-学习笔记01"><a href="#ROOT-学习笔记01" class="headerlink" title="ROOT 学习笔记01"></a>ROOT 学习笔记01</h1><hr>
<h1 id="ROOT-python"><a href="#ROOT-python" class="headerlink" title="ROOT+python"></a>ROOT+python</h1><p>这是一个使用python调用ROOT的程序，运行结果如图：<br><img src="http://o98383o2a.bkt.clouddn.com/pyroot.png" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"></div><div class="line"><span class="comment"># ----------------------------------------------------------------------------------- #</span></div><div class="line"><span class="comment"># </span></div><div class="line"><span class="comment">#   Python script giving example of making a nice ROOT figure.</span></div><div class="line"><span class="comment"># </span></div><div class="line"><span class="comment">#   Author: Troels C. Petersen (NBI)</span></div><div class="line"><span class="comment">#   Email:  petersen@nbi.dk</span></div><div class="line"><span class="comment">#   Date:   4th of November 2016</span></div><div class="line"><span class="comment"># </span></div><div class="line"><span class="comment"># ----------------------------------------------------------------------------------- #</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> ROOT <span class="keyword">import</span> *</div><div class="line"><span class="keyword">from</span> array <span class="keyword">import</span> array</div><div class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># ----------------------------------------------------------------------------------- #</span></div><div class="line"><span class="comment"># Example of nice plot:</span></div><div class="line"><span class="comment"># ----------------------------------------------------------------------------------- #</span></div><div class="line"></div><div class="line">gROOT.Reset()</div><div class="line"></div><div class="line"><span class="comment"># Setting of general plotting style:</span></div><div class="line">gStyle.SetCanvasColor(<span class="number">0</span>)</div><div class="line">gStyle.SetFillColor(<span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="comment"># Settings for statistics box:</span></div><div class="line">gStyle.SetOptStat(<span class="number">1111</span>)</div><div class="line">gStyle.SetOptFit(<span class="number">1111</span>)</div><div class="line"></div><div class="line"><span class="comment"># Statistics and fitting box placing and size:</span></div><div class="line">gStyle.SetStatX(<span class="number">0.92</span>)</div><div class="line">gStyle.SetStatY(<span class="number">0.94</span>)</div><div class="line">gStyle.SetStatW(<span class="number">0.15</span>);                </div><div class="line">gStyle.SetStatH(<span class="number">0.10</span>); </div><div class="line"></div><div class="line"><span class="comment"># Random numbers from the Mersenne-Twister:</span></div><div class="line">r = TRandom3()</div><div class="line">r.SetSeed(<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment"># Text to write on the plot:</span></div><div class="line">text = TLatex()</div><div class="line">text.SetNDC()</div><div class="line">text.SetTextFont(<span class="number">1</span>)</div><div class="line">text.SetTextColor(<span class="number">1</span>)</div><div class="line"></div><div class="line">SavePlots = <span class="keyword">True</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># ------------------------------------------------------------------ #</span></div><div class="line"><span class="comment"># Generate data:</span></div><div class="line"><span class="comment"># ------------------------------------------------------------------ #</span></div><div class="line"></div><div class="line">Npoints = <span class="number">200</span></div><div class="line">x  = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints )   <span class="comment"># Create an array of length Npoints with zeros.</span></div><div class="line">ex = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints )   <span class="comment"># [X]*N is just a python syntax to initialize</span></div><div class="line">y  = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints )   <span class="comment"># a list of values X.</span></div><div class="line">ey = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints )   </div><div class="line"></div><div class="line">alpha0 = <span class="number">3.6</span></div><div class="line">alpha1 = <span class="number">-2.8</span></div><div class="line">alpha2 = <span class="number">2.3</span></div><div class="line">alpha3 = <span class="number">-0.5</span></div><div class="line">sigmay = <span class="number">0.2</span></div><div class="line"></div><div class="line">Npoints2 = <span class="number">40</span></div><div class="line">Noffset = <span class="number">50</span></div><div class="line"></div><div class="line"><span class="comment"># Generate data:</span></div><div class="line"><span class="comment"># --------------</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range( Npoints ) : </div><div class="line"></div><div class="line">    sigmay_used = sigmay</div><div class="line">    <span class="keyword">if</span> (Noffset &lt; i &lt; Noffset+Npoints2) : sigmay_used = sigmay * <span class="number">1.6</span>   <span class="comment"># Noisy region!</span></div><div class="line"></div><div class="line">    x[i]  = float(i+<span class="number">3</span>) / <span class="number">50.0</span></div><div class="line">    ex[i] = <span class="number">0.0</span></div><div class="line">    y[i]  = alpha0 + alpha1 * x[i] + alpha2 * x[i]*x[i] + alpha3 * x[i]*x[i]*x[i] + r.Gaus(<span class="number">0.0</span>,sigmay_used)</div><div class="line">    ey[i] = sigmay</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># ------------------------------------------------------------------ #</span></div><div class="line"><span class="comment"># Fit the data and plot the result:</span></div><div class="line"><span class="comment"># ------------------------------------------------------------------ #</span></div><div class="line"></div><div class="line"><span class="comment"># For graphs in general, see the tutorial page for many more examples:</span></div><div class="line"><span class="comment">#   http://root.cern.ch/root/html/tutorials/graphs/index.html</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Make a white canvas and draw the example fit in:</span></div><div class="line">c0 = TCanvas(<span class="string">"c0"</span>,<span class="string">""</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">1200</span>,<span class="number">700</span>)</div><div class="line">c0.SetFillColor(<span class="number">0</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Fit data:</span></div><div class="line"><span class="comment"># ---------</span></div><div class="line">graph = TGraphErrors( Npoints,x,y,ex,ey )</div><div class="line"></div><div class="line"><span class="comment"># How do you control the axis?</span></div><div class="line"><span class="comment"># Read more at: http://root.cern.ch/root/html/TGaxis.html</span></div><div class="line">graph.SetTitle(<span class="string">"Fit of a graph"</span>)</div><div class="line">graph.GetXaxis().SetRangeUser(<span class="number">-0.1</span>, <span class="number">4.1</span>)</div><div class="line">graph.GetYaxis().SetRangeUser(<span class="number">-4.0</span>, <span class="number">5.4</span>)</div><div class="line">graph.GetXaxis().CenterTitle();              <span class="comment"># Centers titles</span></div><div class="line">graph.GetXaxis().SetTitle(<span class="string">"Deciliters of alcohol"</span>)</div><div class="line">graph.GetXaxis().SetNdivisions(<span class="number">50510</span>)   </div><div class="line">  <span class="comment"># The "50510" is a code, see http://root.cern.ch/root/html/TAttAxis.html</span></div><div class="line">  <span class="comment"># See also: http://root.cern.ch/root/html/tutorials/graphics/gaxis.C.html</span></div><div class="line">graph.GetYaxis().SetTitle(<span class="string">"Spirit of the night"</span>)</div><div class="line">graph.GetYaxis().SetTitleOffset(<span class="number">0.5</span>)</div><div class="line">graph.SetLineWidth(<span class="number">2</span>)</div><div class="line">graph.SetMarkerStyle(<span class="number">20</span>)</div><div class="line">graph.SetMarkerSize(<span class="number">0.6</span>)</div><div class="line">graph.SetMarkerColor(kRed)</div><div class="line">graph.Draw(<span class="string">"AP"</span>)</div><div class="line"></div><div class="line">fit = TF1(<span class="string">"fit"</span>, <span class="string">"pol3"</span>, <span class="number">0.0</span>, float(Npoints+<span class="number">4</span>)/<span class="number">50.0</span> )</div><div class="line">fit.SetLineColor(kRed)</div><div class="line">fit.SetParNames(<span class="string">"Constant"</span>, <span class="string">"Linear coef."</span>, <span class="string">"Quadratic coef."</span>, <span class="string">"Qubic coef."</span>)</div><div class="line">graph.Fit(<span class="string">"fit"</span>,<span class="string">"R"</span>)</div><div class="line"></div><div class="line"><span class="comment"># In ROOT, you can just ask the fit function for it:</span></div><div class="line">Chi2_fit = fit.GetChisquare()</div><div class="line">Ndof_fit = fit.GetNDF()</div><div class="line">Prob_fit = fit.GetProb()</div><div class="line"></div><div class="line"><span class="comment"># Text:</span></div><div class="line">text.SetTextSize(<span class="number">0.04</span>)</div><div class="line">text.DrawLatex(<span class="number">0.16</span>, <span class="number">0.84</span>, <span class="string">"The fit is dubious: Prob(%5.1f,%3d)=%6.4f"</span>%(Chi2_fit,Ndof_fit,Prob_fit))</div><div class="line">text.SetTextSize(<span class="number">0.03</span>)</div><div class="line">text.DrawLatex(<span class="number">0.16</span>, <span class="number">0.81</span>, <span class="string">"Perhaps there is a noisy region?"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># ------------------------------------------------------------------ #</span></div><div class="line"><span class="comment"># Make insert figure (done using a "pad"):</span></div><div class="line"><span class="comment"># ------------------------------------------------------------------ #</span></div><div class="line"></div><div class="line"><span class="comment"># Copy data into a new graph to be drawn</span></div><div class="line">x2  = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints2 )</div><div class="line">ex2 = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints2 )</div><div class="line">y2  = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints2 )</div><div class="line">ey2 = array( <span class="string">'f'</span>, [<span class="number">0.0</span>]*Npoints2 )   </div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range( Npoints2 ) : </div><div class="line">    x2[i]  = x[i+Noffset]</div><div class="line">    ex2[i] = ex[i+Noffset]</div><div class="line">    y2[i]  = y[i+Noffset]</div><div class="line">    ey2[i] = ey[i+Noffset]</div><div class="line"></div><div class="line">graph2 = TGraphErrors( Npoints2,x2,y2,ex2,ey2 )</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Make the pad:</span></div><div class="line">pad = TPad(<span class="string">"pad"</span>, <span class="string">"pad"</span>, <span class="number">0.12</span>, <span class="number">0.11</span>, <span class="number">0.65</span>, <span class="number">0.55</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">pad.SetTopMargin(<span class="number">0.0</span>);</div><div class="line">pad.SetFillColor(<span class="number">0</span>);</div><div class="line">pad.GetFrame().SetFillColor(<span class="number">0</span>);</div><div class="line">pad.GetFrame().SetBorderSize(<span class="number">0</span>);</div><div class="line">pad.Draw();</div><div class="line">pad.cd();            <span class="comment"># Go to this pad, such that next "Draw" is here!</span></div><div class="line"></div><div class="line">xlow  = <span class="number">1.05</span></div><div class="line">xhigh = <span class="number">1.85</span></div><div class="line">ylow  = <span class="number">1.90</span></div><div class="line">yhigh = <span class="number">4.10</span></div><div class="line"></div><div class="line">graph2.SetTitle(<span class="string">""</span>)</div><div class="line">graph2.GetXaxis().SetRangeUser(xlow,xhigh)</div><div class="line">graph2.GetYaxis().SetRangeUser(ylow,yhigh)</div><div class="line">graph2.SetLineWidth(<span class="number">2</span>)</div><div class="line">graph2.SetMarkerStyle(<span class="number">20</span>)</div><div class="line">graph2.SetMarkerColor(<span class="number">2</span>)</div><div class="line">graph2.Draw(<span class="string">"AP"</span>)</div><div class="line">fit.Draw(<span class="string">"same"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Go back to the large canvas and indicate the cut-out:</span></div><div class="line">c0.cd()</div><div class="line">line0 = TLine(xlow, ylow, xhigh, ylow)</div><div class="line">line0.Draw()</div><div class="line">line1 = TLine(xlow, ylow, xlow, yhigh)</div><div class="line">line1.Draw()</div><div class="line">line2 = TLine(xlow, yhigh, xhigh, yhigh)</div><div class="line">line2.Draw()</div><div class="line">line3 = TLine(xhigh, ylow, xhigh, yhigh)</div><div class="line">line3.Draw()</div><div class="line">line0b = TLine(<span class="number">0.36</span>, <span class="number">1.34</span>, <span class="number">1.05</span>, <span class="number">1.9</span>)</div><div class="line">line0b.SetLineStyle(<span class="number">3</span>)</div><div class="line">line0b.Draw()</div><div class="line">line1b = TLine(<span class="number">1.86</span>, <span class="number">1.9</span>, <span class="number">2.52</span>, <span class="number">1.34</span>)</div><div class="line">line1b.SetLineStyle(<span class="number">3</span>)</div><div class="line">line1b.Draw()</div><div class="line"><span class="keyword">if</span> (SavePlots) : c0.SaveAs(<span class="string">"NiceFigureExample.pdf"</span>)</div><div class="line"></div><div class="line"><span class="comment"># ---------------------------------------------------------------------------------- #</span></div><div class="line">raw_input( <span class="string">' ... Press enter to exit ... '</span> )</div></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="https:/arlier1.github.io/2017/04/17/失去的网站/" class="prev">PREV</a></div><div class="copyright"><p>© 2016 - 2017 <a href="">arlier</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>