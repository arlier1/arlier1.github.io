<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 在PINE64上安装G4的尝试 · Hexo</title><meta name="description" content="在PINE64上安装G4的尝试 - arlier"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="https:/arlier1.github.io/favicon.png"><link rel="stylesheet" href="https:/arlier1.github.io/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://arlier1.github.io/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="https:/arlier1.github.io/" class="logo-link"><img src="https:/arlier1.github.io/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="https:/arlier1.github.io/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="https:/arlier1.github.io/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://arlier.work" target="_blank" class="nav-list-link">WORK</a></li><li class="nav-list-item"><a href="https://github.com/arlier" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://hithep.science" target="_blank" class="nav-list-link">HITHEP</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">在PINE64上安装G4的尝试</h1><div class="post-info">Dec 25, 2016</div><div class="post-content"><h1 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h1><p><img src="http://o98383o2a.bkt.clouddn.com/cmakeup.jpg" alt=""><br>之前成功地在ubuntu上安装了G4，这次在Debian上安装应该会顺利一些，就是为了再熟悉一下安装过程。</p>
<p>本来我用的ubuntu的PINE的系统，可是后来执行apt命令网速很慢，然后卡死了网上找了很多办法都没法解决甚至开不了机，不得不重新更换系统。之前Debian安装很顺利，但是屏幕分辨率一直不对，弄了好久也不行；然而昨天我机智地改了/boot中的配置文件，然后就调成了1080p，非常好。据说Debian也比较稳定。对了，昨天ubuntu被玩坏就是因为我想安装一个3070的USB无线网卡，由于不能自动识别所以要编译驱动，结果编译了好几次都出错；然后在升级apt和linux内核的过程中系统死了。但是Debian是直接可以识别这块网卡的，而且网速非常快。</p>
<p>其实这就是在折腾，没什么明显的必要；我只是在尝试这种在非完整版系统上运行软件的可能性。就像当初内存卡无法识别一样，我发现是电脑的读卡器有一根针弯了，然后拨回来就能读出了；接着再用diskgenius重新分区重建MBR就好了。前几天我安卓手机只能识别出一个SIM卡，打开发现由于经常插拔造成卡槽的一根针断了，于是找了一根订书针接上了，也许这就是物理神奇的地方。一些law是如此稳定而普遍地成立，从而让你觉得这很美，对此坚信无疑。<br><a id="more"></a></p>
<ul>
<li>查看gcc版本 gcc -v<br>   gcc version 4.9.2 (Debian/Linaro 4.9.2-10)</li>
<li>sudo apt-get install build-essential</li>
<li>sudo apt-get install cmake</li>
<li>sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev libxt-dev libxmu-dev libxi-dev zlib1g-dev libgl2ps-dev    libexpat1-dev libxerces-c-dev</li>
<li>mkdir geant4;cd geant4</li>
<li>sudo wget <a href="http://geant4.cern.ch/support/source/geant4.10.03.tar.gz" target="_blank" rel="external">http://geant4.cern.ch/support/source/geant4.10.03.tar.gz</a><br>不得不说这个源码挺小的，只有33M，真的很厉害。</li>
<li>sudo tar -zxvf geant4.10.03.tar.gz   还是加上v参数输出下信息比较好，不然会以为卡死了。</li>
<li>sudo mkdir g4build;sudo mkdir g4install;cd g4build</li>
<li>sudo cmake -DCMAKE_INSTALL_PREFIX=/home/debian/work/geant4/g4install -DGEANT4_USE_OPENGL_X11=ON /home/debian/work/geant4/geant4.10.03<br>提示：CMake Error at CMakeLists.txt:25 (cmake_minimum_required):<br>CMake 3.3 or higher is required.  You are running version 3.0.2</li>
<li>查看版本信息 cmake –version<br>cmake version 3.0.2<br>CMake suite maintained and supported by Kitware (kitware.com/cmake).<br>这下需要对cmake进行升级了。参考<a href="http://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04" target="_blank" rel="external">http://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04</a></li>
<li>sudo apt-get install software-properties-common</li>
<li>sudo add-apt-repository ppa:george-edison55/cmake-3.x</li>
<li><p>sudo apt-get update  我用的是arm，这里提示有错。。。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">W: GPG error: http://ftp.us.debian.org jessie Release: The following signatures were invalid: BADSIG 8B48AD6246925553 Debian Archive Automatic Signing Key (7.0/wheezy)</div><div class="line"> &lt;ftpmaster@debian.org&gt;W: Failed to fetch http://ppa.launchpad.net/george-edison55/cmake-3.x/ubuntu/dists/jessie/main/binary-arm64/Packages  404  Not Found</div><div class="line">W: Failed to fetch http://ppa.launchpad.net/george-edison55/cmake-3.x/ubuntu/dists/jessie/main/binary-armhf/Packages  404  Not Found</div><div class="line">E: Some index files failed to download. They have been ignored, or old ones used instead.</div></pre></td></tr></table></figure>
</li>
<li><p>若没有安装cmake，则<br>sudo apt-get instal cmake</p>
</li>
<li>若已经安装了cmake，则<br>sudo apt-get upgrade<br>这个方法还是不行<h1 id="继续尝试"><a href="#继续尝试" class="headerlink" title="继续尝试"></a>继续尝试</h1>再参考这篇文章<a href="http://www.linuxidc.com/Linux/2012-10/72216.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-10/72216.htm</a></li>
<li>卸载sudo apt-get autoremove cmake</li>
<li>cd /usr</li>
<li>sudo wget <a href="https://cmake.org/files/v3.7/cmake-3.7.1-Linux-x86_64.tar.gz" target="_blank" rel="external">https://cmake.org/files/v3.7/cmake-3.7.1-Linux-x86_64.tar.gz</a> 下载最新版</li>
<li>sudo tar zxvf cmake-3.7.1-Linux-x86_64.tar.gz<br>创建链接</li>
<li>sudo ln -s /usr/cmake-3.7.1-Linux-x86_64/bin/* /usr/bin/<br>然后还是不能执行cmake -version， 突然明白，我应该装arm的而不是x86的！！cmake官网没有编译好的，所以下载源码自己编译就行了。</li>
<li>sudo wget <a href="https://cmake.org/files/v3.7/cmake-3.7.1.tar.gz" target="_blank" rel="external">https://cmake.org/files/v3.7/cmake-3.7.1.tar.gz</a>  源码只有7M。</li>
<li>sudo tar zxvf cmake-3.7.1.tar.gz</li>
<li>cd cmake-3.7.1/</li>
<li>sudo ./configure    配置<br> CMake has bootstrapped.  Now run make.   成功了,花了大约半小时。</li>
<li>sudo make  正是编译</li>
<li>sudo make indstall  安装</li>
<li>查看版本 cmake -version<br>输出 cmake version 3.7.1<br>CMake suite maintained and supported by Kitware (kitware.com/cmake).</li>
<li>终于安装成功了。<h1 id="接着安装G4"><a href="#接着安装G4" class="headerlink" title="接着安装G4"></a>接着安装G4</h1></li>
<li>cd ~/work/geant4/g4build/</li>
<li>sudo cmake -DCMAKE_INSTALL_PREFIX=/home/debian/work/geant4/g4install -DGEANT4_USE_OPENGL_X11=ON /home/debian/work/geant4/geant4.10.03</li>
<li>sudo make -j4 开始编译啦啦啦</li>
<li>sudo mkae install<h2 id="安装数据文件"><a href="#安装数据文件" class="headerlink" title="安装数据文件"></a>安装数据文件</h2></li>
<li>cd /home/debian/work/geant4/g4install/share/Geant4-10.3.0</li>
<li>sudo mkdir data</li>
<li>cd data<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4NDL.4.5.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4EMLOW.6.50.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4PhotonEvaporation.4.3.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4RadioactiveDecay.5.1.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4NEUTRONXS.1.4.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4PII.1.3.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/RealSurface.1.0.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4SAIDDATA.1.1.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4ABLA.3.0.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4ENSDFSTATE.2.1.tar.gz</div><div class="line">sudo wget http://geant4.cern.ch/support/<span class="built_in">source</span>/G4TENDL.1.3.tar.gz</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="然后提示磁盘空间不足"><a href="#然后提示磁盘空间不足" class="headerlink" title="然后提示磁盘空间不足"></a>然后提示磁盘空间不足</h1><p>又得解决这个问题，都怪当初没有先进行分区。32g的内存卡应该还有20多g的空间。<br>参考这篇文章进行操作： <a href="http://www.ituring.com.cn/article/261283" target="_blank" rel="external">http://www.ituring.com.cn/article/261283</a><br>这个方法也有问题，重启之后会卡在开机界面，好久进不去，只能放弃，然后用<a href="http://arlier.work/2016/12/26/PINE64%E5%86%85%E5%AD%98%E5%8D%A1%E6%9B%B4%E6%94%B9%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/" target="_blank" rel="external">另一种方法</a>才弄好</p>
<h1 id="继续安装"><a href="#继续安装" class="headerlink" title="继续安装"></a>继续安装</h1><p>这次磁盘空间调整后变成了31G，再也不担心了；然后我一想树莓派也是Debian的系统，为何不一起装一下，反正又不影响什么。<br>只是在安装的过程中我发现，虽然PINE64的配置要比树莓派高，但无论是下载速度还是解压、编译的速度明显都比树莓派慢很多。当然这里面的影响因素比较多，我初步猜测是因为内存卡读写的原因（树莓派的内存卡比较好）。看来下次真得用一个好一点的存储卡了。</p>
<p>安装过程内存卡非常不稳定，还经常断网，很麻烦。断网之后删除已经安装的内容，结果读写错误，使用<code>dmesg</code>看到一大堆文件错误。</p>
</div></article></div></main><footer><div class="paginator"><a href="https:/arlier1.github.io/2016/12/24/apt-get被锁/" class="prev">PREV</a><a href="https:/arlier1.github.io/2016/12/26/PINE64内存卡更改分区大小/" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2017 <a href="https://arlier1.github.io">arlier</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>